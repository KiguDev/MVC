#pragma checksum "C:\Users\SIQUEIROS\source\repos\CURSO\RestauranteMVC\Views\Productos\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b65d5ee8308867834b5f9871bf202a901711b0db"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Productos_Index), @"mvc.1.0.view", @"/Views/Productos/Index.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Productos/Index.cshtml", typeof(AspNetCore.Views_Productos_Index))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\SIQUEIROS\source\repos\CURSO\RestauranteMVC\Views\_ViewImports.cshtml"
using RestauranteMVC;

#line default
#line hidden
#line 2 "C:\Users\SIQUEIROS\source\repos\CURSO\RestauranteMVC\Views\_ViewImports.cshtml"
using RestauranteMVC.Models;

#line default
#line hidden
#line 3 "C:\Users\SIQUEIROS\source\repos\CURSO\RestauranteMVC\Views\_ViewImports.cshtml"
using Restaurante.Core.Entities;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b65d5ee8308867834b5f9871bf202a901711b0db", @"/Views/Productos/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"3021e54aff9ad800a8f73fda0d422276f9de9a1f", @"/Views/_ViewImports.cshtml")]
    public class Views_Productos_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(0, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 2 "C:\Users\SIQUEIROS\source\repos\CURSO\RestauranteMVC\Views\Productos\Index.cshtml"
  
    ViewData["Title"] = "Productos";

#line default
#line hidden
            BeginContext(47, 900, true);
            WriteLiteral(@"
<div class=""card"" style=""margin-top:40px"">
    <div class=""card-content"">
        <span class=""card-title center"">Productos</span>
        <table id=""tabla"" class=""table table-striped table-hover"">
            <thead>
                <tr>
                    <td>Id</td>
                    <td>Nombre</td>
                    <td>Ingredientes</td>
                    <td>Precio</td>
                    <td>Cantidad</td>
                    <td>Ordenes</td>
                    <td>Acciones</td>
                </tr>
            </thead>
            <tbody id=""table-body"">
            </tbody>
        </table>
    </div>
</div>



<div id=""modal1"" class=""modal"">
    <div class=""modal-footer"">
        <div class=""modal-body"" id=""modalCuerpo"">

        </div>
        <button id=""submitButton"" class=""btn red accent-3 center"">Submit</button>
    </div>
</div>

");
            EndContext();
            DefineSection("Scripts", async() => {
                BeginContext(966, 4545, true);
                WriteLiteral(@"
<script>

    function OpenModal(id = 0) {
        fetch(`/Productos/Guardar?id=${id}`).then(function (response) { return response.text() }).then(function (view)
        {
            var modal = document.getElementById(""modalCuerpo"");
            modal.innerHTML = view;
            $(""#modal1"").modal(""open"");
        });
    }

    function GetProducts() {
        CleanTable();
        fetch(""/api/productos"").then(function (response) { return response.json() }).then(function (jsonResponse)
        {
            jsonResponse.forEach(function (item, index)
            {
                var id = document.createElement(""td"");
                id.innerHTML = item[""id""];
                var nombre = document.createElement(""td"");
                nombre.innerHTML = item[""nombre""];
                var ingredientes = document.createElement(""td"");
                ingredientes.innerHTML = item[""ingredientes""];
                var precio = document.createElement(""td"");
                precio.inne");
                WriteLiteral(@"rHTML = item[""precio""];
                var cantidad = document.createElement(""td"");
                cantidad.innerHTML = item[""cantidad""];
                var orderLink = document.createElement(""a"");
                orderLink.innerHTML = item[""ordenes""] == null ? 0 : item[""ordenes""];
                var ordenes = document.createElement(""td"")
                ordenes.appendChild(orderLink);
                var edit = document.createElement(""td"");
                var editButton = document.createElement(""button"");
                editButton.innerHTML = ""Edit"";
                editButton.addEventListener(""click"", function () {OpenModal(item[""id""]);});  
                editButton.className = ""btn btn-primary red accent-3"";
                edit.appendChild(editButton);
                var tr = document.createElement(""tr"");
                tr.appendChild(id);
                tr.appendChild(nombre);
                tr.appendChild(ingredientes);
                tr.appendChild(precio)
               ");
                WriteLiteral(@" tr.appendChild(cantidad);
                tr.appendChild(ordenes);
                tr.appendChild(edit);
                var tbody = document.getElementById(""table-body"");
                tbody.appendChild(tr);
            }
            );
        });
    }

    function Guardar() {
        var data = {
            Nombre: document.getElementById(""Nombre"").value,
            Ingredientes: document.getElementById(""Ingredientes"").value,
            Precio: document.getElementById(""Precio"").value,
            Cantidad: document.getElementById(""Cantidad"").value
        };
        var idProducto = document.getElementById(""id"").value;
        console.log(idProducto);

        var requestMethod = idProducto > 0 ? ""PUT"" : ""POST"";
        fetch(""api/productos"", {
            method: requestMethod,
                body: JSON.stringify(data),
                headers: { 'Content-Type': 'application/json' }
        }).
        then(function (response) {
            console.log(response.status);");
                WriteLiteral(@"
             $(""#modal1"").modal(""close"");
            CleanTable();
            GetProducts();
        });
        $(""#modal1"").modal(""close"");
    }

    function CleanTable() {
        var tableBody = document.getElementById(""table-body"");
        while (tableBody.hasChildNodes()) {
            tableBody.removeChild(tableBody.firstChild);
        }
    }
    
    $(document).ready(function () {
        $(""#modal1"").modal();
        GetProducts();
        var submitButton = document.getElementById(""submitButton"");
        submitButton.addEventListener('click', function () {
            Guardar();

        });
        var tabla = $('#tabla').DataTable(
            {
                ""language"":
                {
                    ""zeroRecords"":"" ""
                },
                select: true,
                dom: ""Bfrtip"",
                buttons: [
                    'copy', 'excel', 'pdf',
                    {
                        text: ""Eliminar"",
              ");
                WriteLiteral(@"          action: function ()
                        {
                            OpenModal();
                        }
                    },
                    {
                        text: ""Agregar"",
                        action: function ()
                        {
                            OpenModal();
                        }
                    }
                ]
            }
        );
    });

</script>
 ");
                EndContext();
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
